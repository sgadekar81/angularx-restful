!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/http"),require("rxjs/Observable"),require("rxjs/add/operator/catch"),require("rxjs/add/operator/map"),require("rxjs/add/observable/throw"),require("angularx-headers/lft.service"),require("angularx-headers")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/http","rxjs/Observable","rxjs/add/operator/catch","rxjs/add/operator/map","rxjs/add/observable/throw","angularx-headers/lft.service","angularx-headers"],e):e((t.ng=t.ng||{},t.ng["angularx-restful"]=t.ng["angularx-restful"]||{}),t.ng.core,t._angular_common,t._angular_http,t.Rx,null,t.Rx.Observable.prototype,null,t.angularxHeaders_lft_service,t.angularxHeaders)}(this,function(t,e,r,n,s,a,i,o,u,h){"use strict";var l=function(){return function(){}}(),d=function(){function t(t,e){this.http=t,this._lftSrv=e}return t.prototype.get=function(t){return this.resolveRestInit(t),this.http.get(t.uri).map(this.extractData.bind(this)).catch(this.handleError.bind(this))},t.prototype.post=function(t){return this.resolveRestInit(t),this.http.post(t.uri,t.payload,{headers:this.getDftHdr(t.headers)}).map(this.extractData.bind(this)).catch(this.handleError.bind(this))},t.prototype.put=function(t){return this.resolveRestInit(t),this.http.put(t.uri,t.payload,{headers:this.getDftHdr(t.headers)}).map(this.extractData.bind(this)).catch(this.handleError.bind(this))},t.prototype.delete=function(t){return this.resolveRestInit(t),this.http.delete(t.uri).map(this.extractData.bind(this)).catch(this.handleError.bind(this))},t.prototype.extractData=function(t){return this.resolveRestFin(),t},t.prototype.handleError=function(t){return this.resolveRestFin(),s.Observable.throw(t.json()||"Server error")},t.prototype.getDftHdr=function(t){return t&&t.length>0?this._lftSrv.hdrs(t):this._lftSrv.hdrs("authorization","")},t.prototype.event=function(t,e){var r=new CustomEvent(t,{detail:e});document.dispatchEvent(r)},t.prototype.resolveRestInit=function(t){this.params=t,t.events&&(this.event("angularx-restful-started",{msg:t.events.restInitMsg}),this.resolveEventHandlers(this.params).restInit({msg:t.events.restInitMsg}))},t.prototype.resolveRestFin=function(){this.params.events&&(this.resolveEventHandlers(this.params).restFin({msg:this.params.events.restFinMsg}),this.event("angularx-restful-finished",{msg:this.params.events.restFinMsg}))},t.prototype.resolveEventHandlers=function(t){var e=this.getEventHandlers();return e.restInit||t.events.restInit&&(e.restInit=t.events.restInit),e.restFin||t.events.restFin&&(e.restFin=t.events.restFin),e},t.prototype.setEventHandlers=function(t){this.eventHandlers=t},t.prototype.getEventHandlers=function(){return this.eventHandlers||(this.eventHandlers=new l,this.eventHandlers.restFin=function(){},this.eventHandlers.restInit=function(){}),this.eventHandlers},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Http},{type:u.LftSrv}]},t}(),p=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[r.CommonModule,h.AngularxHeaders],providers:[d]}]}],t.ctorParameters=function(){return[]},t}();t.AngularxRestful=p,Object.defineProperty(t,"__esModule",{value:!0})});